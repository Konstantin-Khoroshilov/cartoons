<html>

<head>
  <title>Cartoons</title>
  <link rel="icon" type="image/x-icon" href="./assets/favicon.svg">
  <link rel="stylesheet" href="./index.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div class="modal-window">
    <div class="playlist-container">
      <ul class="playlist list"></ul>
      <div class="control-panel">
        <div class="select-container">
          <label class="select-label select-label_type_name">
            Название
            <select class="select-cartoon" name="" id=""></select>
          </label>
          <label class="select-label select-label_type_season">
            Сезон
            <select class="select-season" name="" id=""></select>
          </label>
          <label class="select-label select-label_type_episode">
            Серия
            <select class="select-episode" name="" id=""></select>
          </label>
        </div>
        <div class="controls-contaier">
          <button class="button button_type_to-beginning" type="button"></button>
          <button class="button button_type_prev" type="button"></button>
          <button class="button button_type_play" type="button"></button>
          <button class="button button_type_next" type="button"></button>
          <button class="button button_type_to-end" type="button"></button>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  const selectCartoon = document.querySelector('.select-cartoon');
  const selectSeason = document.querySelector('.select-season');
  const selectEpisode = document.querySelector('.select-episode');
  const playlistEl = document.querySelector('.playlist');
  const toBegButton = document.querySelector('.button_type_to-beginning');
  const prevButton = document.querySelector('.button_type_prev');
  const playButton = document.querySelector('.button_type_play');
  const nextButton = document.querySelector('.button_type_next');
  const toEndButton = document.querySelector('.button_type_to-end');
  const playEvt = new Event('play');
  const playlist = [];
  let longestCartoonLength = 0;

  const chan = {
    cover: './assets/chan.webp',
    name: 'Приключения Джеки Чана',
    seasons: [13, 39, 17, 13, 13],
    episodes: [
      {
        season: '1',
        episode: '1',
        url: 'b8ff6309fafa356c5dcf1516bc79e87d',
      },
      {
        season: '1',
        episode: '2',
        url: '59ff3721ef8e9c670de3c308e1a898d6',
      },
      {
        season: '1',
        episode: '3',
        url: '95f4aabdec02b774750ed624ff473382',
      },
      {
        season: '1',
        episode: '4',
        url: '7373240457437b433515ef9aecfebe19',
      },
      {
        season: '1',
        episode: '5',
        url: '37bf70911667e918d8b34bfce869cd5a',
      },
      {
        season: '1',
        episode: '6',
        url: 'f0283378f779a448572f13512b02fd91',
      },
      {
        season: '1',
        episode: '7',
        url: 'b83140b93a7ea2289c7ae4c63b18fa38',
      },
      {
        season: '1',
        episode: '8',
        url: 'e43b88614e111289db938e1ef6f8b8f8',
      },
      {
        season: '1',
        episode: '9',
        url: '2672c37728cfc8007c3f978e24192a8d',
      },
      {
        season: '1',
        episode: '10',
        url: '2735ff7b6a862f6a22eafc59361e7584',
      },
      {
        season: '1',
        episode: '11',
        url: 'aeccc712383e01df5812c33e6d205629',
      },
      {
        season: '1',
        episode: '12',
        url: 'b9801721f9fb87ce231fca4a23df2d92',
      },
      {
        season: '1',
        episode: '13',
        url: '738ab3e9fb5b35c757ed0703f87db9ff',
      },
      {
        season: '2',
        episode: '1',
        url: '1b132b4d7817b7b560db6c6b3fdea725',
      },
      {
        season: '2',
        episode: '2',
        url: '0edb9d721f0443360848a72546e14dff',
      },
      {
        season: '2',
        episode: '3',
        url: 'f6f2d51a50646a5cea371aaffa7ab124',
      },
      {
        season: '2',
        episode: '4',
        url: 'a7f03397cfda493ed48eebc537b6653a',
      },
      {
        season: '2',
        episode: '5',
        url: '388e3b589e4ec3d6e754ae0a87ee71cf',
      },
      {
        season: '2',
        episode: '6',
        url: '35d1fa2c55194b459850cd3f144a3832',
      },
      {
        season: '2',
        episode: '7',
        url: 'cb1300a5b50ce725e95b525f3dd03e57',
      },
      {
        season: '2',
        episode: '8',
        url: 'b85365d19383875e77b65fc6d77d66ec',
      },
      {
        season: '2',
        episode: '9',
        url: '30b5d3a36313630082a22c8f8c917eb7',
      },
      {
        season: '2',
        episode: '10',
        url: 'e45d92159963d7e5576f218e56c79154',
      },
      {
        season: '2',
        episode: '11',
        url: '187932ae01a1ab81ca27d276b65bb3ab',
      },
      {
        season: '2',
        episode: '12',
        url: '9b3036ad7a7bb659caee99b84f409f69',
      },
      {
        season: '2',
        episode: '13',
        url: '6761171a54a66b29e16d8a6c71974748',
      },
      {
        season: '2',
        episode: '14',
        url: '34b914fa616932e5a43d1861d652be86',
      },
      {
        season: '2',
        episode: '15',
        url: 'f36fdeea23720da08a6ed0f3f802cb84',
      },
      {
        season: '2',
        episode: '16',
        url: '04583b1f91c2303aecb65e7f6523ae34',
      },
      {
        season: '2',
        episode: '17',
        url: '6d369481feb88df80ab0e86e648f9758',
      },
      {
        season: '2',
        episode: '18',
        url: 'd7e7cb5e0ee7130e97a14513e25b7389',
      },
      {
        season: '2',
        episode: '19',
        url: '7fa995643d15a3dcc37631746d878be9',
      },
      {
        season: '2',
        episode: '20',
        url: '161eb2bce1b85a3f6a7fab8d51d8c2c7',
      },
      {
        season: '2',
        episode: '21',
        url: 'c31252731b3968f7f67b9abc0cdc0029',
      },
      {
        season: '2',
        episode: '22',
        url: '8f47202343156a5e36f06ca1a72e1bf1',
      },
      {
        season: '2',
        episode: '23',
        url: '3de22007f14869ba35df975ced1e51f6',
      },
      {
        season: '2',
        episode: '24',
        url: '77dce42f4ed69f09f8ffdd52723d5932',
      },
      {
        season: '2',
        episode: '25',
        url: '514ca6dc7e33aa5da65d5d3f6c7867bc',
      },
      {
        season: '2',
        episode: '26',
        url: '1e4f9942c2fccedfa05de78fbc189932',
      },
      {
        season: '2',
        episode: '27',
        url: '18dffb66f716173caca9fdd2926c9ea4',
      },
      {
        season: '2',
        episode: '28',
        url: '37fa6c9d34b1d6d71425b15250330ae9',
      },
      {
        season: '2',
        episode: '29',
        url: 'e342e803ac921761658977a2df54b694',
      },
      {
        season: '2',
        episode: '30',
        url: '308f4c6fe2937e5bb1faaad36295f08d',
      },
      {
        season: '2',
        episode: '31',
        url: '6c62189bc231e9ff43c27f1ba9776f74',
      },
      {
        season: '2',
        episode: '32',
        url: 'f615e4c62e15ecad8148b88590e39afb',
      },
      {
        season: '2',
        episode: '33',
        url: '091e62f47f0f16f4ec07f1be1a05e325',
      },
      {
        season: '2',
        episode: '34',
        url: '569f33e03f753291365d512feb7a8972',
      },
      {
        season: '2',
        episode: '35',
        url: '40adc190d797c799a86cd9dcbd76472c',
      },
      {
        season: '2',
        episode: '36',
        url: 'cfccf9d4d9a4a7188e4645e9490e6f66',
      },
      {
        season: '2',
        episode: '37',
        url: '6efb2a57f5caf207b43b576aa838c4a3',
      },
      {
        season: '2',
        episode: '38',
        url: '7b9cb99f4b80dde4e1de9258830b6e1c',
      },
      {
        season: '2',
        episode: '39',
        url: '01d934da1be6c5a5c6676d2f40647f32',
      },
      {
        season: '3',
        episode: '1',
        url: '54d42a5c7b2c93b614522ad32a896eb4',
      },
      {
        season: '3',
        episode: '2',
        url: '5ffdda291636701bb6647d6850c63fc4',
      },
      {
        season: '3',
        episode: '3',
        url: '723a1d548d5a1e6ec20a4f3f2dc27e79',
      },
      {
        season: '3',
        episode: '4',
        url: '2a5b3a3a2dd633b36eed29f982e764bf',
      },
      {
        season: '3',
        episode: '5',
        url: 'dd96f7014bc27476aa568e936cabf6b0',
      },
      {
        season: '3',
        episode: '6',
        url: '845a0f1acb0b7053c7281aaedef4e750',
      },
      {
        season: '3',
        episode: '7',
        url: '009fc083931a04d36b88988262ee35c4',
      },
      {
        season: '3',
        episode: '8',
        url: 'd9a3976fb5021c79539652cd45f7d34a',
      },
      {
        season: '3',
        episode: '9',
        url: 'bd190cf2d1259885cb9359c4ee24b501',
      },
      {
        season: '3',
        episode: '10',
        url: '4866b4ee89d07d633b0600de32a26e9a',
      },
      {
        season: '3',
        episode: '11',
        url: 'bd9f9ac2b39567f7b14853610cf273c2',
      },
      {
        season: '3',
        episode: '12',
        url: '6698b29128405d9944ba4aa839912426',
      },
      {
        season: '3',
        episode: '13',
        url: '8767143bf85c9670e773bcb6b2131a7a',
      },
      {
        season: '3',
        episode: '14',
        url: 'eaf9093894f7df151122b2259d3ce0ea',
      },
      {
        season: '3',
        episode: '15',
        url: '314b561cc264c7b63752aa817bc08571',
      },
      {
        season: '3',
        episode: '16',
        url: 'e150306e5060425e19cc296b6a65db3d',
      },
      {
        season: '3',
        episode: '17',
        url: '641ab7484c3c63ee7a98c8bd170e87b6',
      },
      {
        season: '4',
        episode: '1',
        url: '238998730a06c31d55ce33cf30b7e83a',
      },
      {
        season: '4',
        episode: '2',
        url: 'e9066ef444a9117699a2fe9f8d38b96e',
      },
      {
        season: '4',
        episode: '3',
        url: '0f384d09c9bdd1e21f844245991d38c8',
      },
      {
        season: '4',
        episode: '4',
        url: '8694e2eab20dcc6f53032ff115fce9d6',
      },
      {
        season: '4',
        episode: '5',
        url: '237d63db60434c61beafa8f21f24ce34',
      },
      {
        season: '4',
        episode: '6',
        url: '1b529cb2fe854f0c2be5dc69fe9e924e',
      },
      {
        season: '4',
        episode: '7',
        url: '99e8ce75369a712ea1b9cd48d74fbd9e',
      },
      {
        season: '4',
        episode: '8',
        url: 'b203c483fa7754950bcb2e28e12fdb8a',
      },
      {
        season: '4',
        episode: '9',
        url: '72e5aa17b8e00dc276c8a5bde7377ae4',
      },
      {
        season: '4',
        episode: '10',
        url: '7d6d983f8b7fe601306c98faf310a715',
      },
      {
        season: '4',
        episode: '11',
        url: '94160ec3fc193ec05df454a711d9e370',
      },
      {
        season: '4',
        episode: '12',
        url: 'd838190085174d0e8556bc5015616599',
      },
      {
        season: '4',
        episode: '13',
        url: 'eb8118d42781e3b3424420182014d149',
      },
      {
        season: '5',
        episode: '1',
        url: '66d5ca4d4ffe90859eb36b1c59b2dda5',
      },
      {
        season: '5',
        episode: '2',
        url: 'eee7a240da2d5890015d4900d66699e3',
      },
      {
        season: '5',
        episode: '3',
        url: '977e829a8d7eb77b4ed85a1945f49f55',
      },
      {
        season: '5',
        episode: '4',
        url: '1ef952e266285ecc13f871497326dd0d',
      },
      {
        season: '5',
        episode: '5',
        url: '021eb820d2d323155f52be0f526042da',
      },
      {
        season: '5',
        episode: '6',
        url: '3beddbd70c872651b17f944572d31649',
      },
      {
        season: '5',
        episode: '7',
        url: 'd9f989d5f1d537c0e67d0d17eb305ed5',
      },
      {
        season: '5',
        episode: '8',
        url: '5232f7d81741559aead1f50beaafd279',
      },
      {
        season: '5',
        episode: '9',
        url: '8681ab9a8ca050939228b2cc28603de5',
      },
      {
        season: '5',
        episode: '10',
        url: '89c7a92b307db7c926be3a5447149f92',
      },
      {
        season: '5',
        episode: '11',
        url: 'ea3bb4f7c7e4ca6e6bbae89497e4caf2',
      },
      {
        season: '5',
        episode: '12',
        url: '247539dcce6921e1489ff54e024be61a',
      },
      {
        season: '5',
        episode: '13',
        url: 'dad546e0ff11935de01aba7cd829688c',
      },
    ],
  };

  const witch = {
    cover: './assets/witch.jpg',
    name: 'Чародейки',
    seasons: [26, 26],
    episodes: [
      {
        season: '1',
        episode: '1',
        url: 'edea11e4ba3ce74e18d42bb1b3eb6147',
      },
      {
        season: '1',
        episode: '2',
        url: '4f40b50a5c72cecb9fbf2be8b06abd36',
      },
      {
        season: '1',
        episode: '3',
        url: 'd2f0b4973cbb71a3dfd063ac46ede00f',
      },
      {
        season: '1',
        episode: '4',
        url: '097157c7e5a06e56da1d6346d73ef36a',
      },
      {
        season: '1',
        episode: '5',
        url: '38350494db9f1b51b9fc15684e622649',
      },
      {
        season: '1',
        episode: '6',
        url: '828490ef08dd683da9a4976a4218bb39',
      },
      {
        season: '1',
        episode: '7',
        url: '9d8c0626c8699a517c306d1f0c7e3001',
      },
      {
        season: '1',
        episode: '8',
        url: 'b5a0272136ce96be5cd00c0618b287bf',
      },
      {
        season: '1',
        episode: '9',
        url: '6f0beae0e858ba538b15b0a43df29fc5',
      },
      {
        season: '1',
        episode: '10',
        url: '72e45dd0206881b6b68f1bb1e9ba2fd1',
      },
      {
        season: '1',
        episode: '11',
        url: '926ecf6cb2220688db0b2048b1a68480',
      },
      {
        season: '1',
        episode: '12',
        url: 'cfcced571508b86918e1405cc890440a',
      },
      {
        season: '1',
        episode: '13',
        url: '3009b5868c9fbe834ec73a3636dc829d',
      },
      {
        season: '1',
        episode: '14',
        url: '3f1ae74dd008203f2de9d5f81d358278',
      },
      {
        season: '1',
        episode: '15',
        url: '12f95bdcdde473fbe50045da3dc9984b',
      },
      {
        season: '1',
        episode: '16',
        url: 'e48898333c72b45b9b4f87addf5a20c9',
      },
      {
        season: '1',
        episode: '17',
        url: 'b63bf3a0efab32888953a8383b4a0f4b',
      },
      {
        season: '1',
        episode: '18',
        url: 'a2247b73c352bbd711862a185d458451',
      },
      {
        season: '1',
        episode: '19',
        url: 'eab6ec777a1447c67c67f7633c911bd9',
      },
      {
        season: '1',
        episode: '20',
        url: '705d74e90c2f287ae0b979f121a0316e',
      },
      {
        season: '1',
        episode: '21',
        url: 'f36ab724a6e5d6c8df74f6fdefa43a9d',
      },
      {
        season: '1',
        episode: '22',
        url: '75f9c44298f305457d63bd499ab82143',
      },
      {
        season: '1',
        episode: '23',
        url: '5ee9ae011d8c6e2981d9684bf59e2af1',
      },
      {
        season: '1',
        episode: '24',
        url: '67a8b6d0d7f4019b93ff62e9112556a7',
      },
      {
        season: '1',
        episode: '25',
        url: '352ec49f7b4d52ddab22b48172f3e8c7',
      },
      {
        season: '1',
        episode: '26',
        url: '62a9ecc795abee72f7c1da3b86209ede',
      },
      {
        season: '2',
        episode: '1',
        url: '0558234cdb47241d15005d72e1caddb6',
      },
      {
        season: '2',
        episode: '2',
        url: 'a585d71b078d2346db96f1f37a4d5d3b',
      },
      {
        season: '2',
        episode: '3',
        url: 'd3a8acea4ffba585d172acee44fdd32e',
      },
      {
        season: '2',
        episode: '4',
        url: 'fac963922ee3300b7e22b0d0c38d1477',
      },
      {
        season: '2',
        episode: '5',
        url: 'e279d229dc6baca10a248db9ec6888f1',
      },
      {
        season: '2',
        episode: '6',
        url: '9433ec5dc67df9c30683620430d7c4f2',
      },
      {
        season: '2',
        episode: '7',
        url: 'c5b4a2392d70fdd0407bb84c77f678c2',
      },
      {
        season: '2',
        episode: '8',
        url: '29b3a2f5efbef5dfecc527b3faa975ed',
      },
      {
        season: '2',
        episode: '9',
        url: '88ac5ad55f8d10e2d745602dc31f8377',
      },
      {
        season: '2',
        episode: '10',
        url: '9c364dcfd5efc98b997317e2fe17a6d3',
      },
      {
        season: '2',
        episode: '11',
        url: 'd9b4825059f414ad5c28163b46c2417e',
      },
      {
        season: '2',
        episode: '12',
        url: '3175027196cf843eeb758e2e496a34c3',
      },
      {
        season: '2',
        episode: '13',
        url: '7e8223d1e209b5fb79e0aa16c5bb17f8',
      },
      {
        season: '2',
        episode: '14',
        url: '4b08d25de791bdd8982a7370c414104d',
      },
      {
        season: '2',
        episode: '15',
        url: '9ec6cb29947a3eb17eaf61d581aba7d8',
      },
      {
        season: '2',
        episode: '16',
        url: 'c0a40dd937703993931d9441f2cbca78',
      },
      {
        season: '2',
        episode: '17',
        url: 'c05266265a86c13e365ee71cffd593b3',
      },
      {
        season: '2',
        episode: '18',
        url: '3d45b3f270ac39c43b62a32457845cd1',
      },
      {
        season: '2',
        episode: '19',
        url: '93a1b059b51d74f1d6a744d8d8da14d4',
      },
      {
        season: '2',
        episode: '20',
        url: '07535c1200d510df8f1c06931ece6a0a',
      },
      {
        season: '2',
        episode: '21',
        url: 'cc35c85305f5d95d933a6d715669ca56',
      },
      {
        season: '2',
        episode: '22',
        url: 'ba705a5c28441c08997aec2b92dd893c',
      },
      {
        season: '2',
        episode: '23',
        url: '83bad4be231e8e810ef821e0567a75f7',
      },
      {
        season: '2',
        episode: '24',
        url: '58a7661636ac3eac0c0c154978408846',
      },
      {
        season: '2',
        episode: '25',
        url: 'd4ea5d90dc7bce5716f32c28e1741119',
      },
      {
        season: '2',
        episode: '26',
        url: '02d805d691e4fa9c269a1b1e9d86a3da',
      },
    ],
  };

  const beavers = {
    cover: './assets/beavers.webp',
    name: 'Крутые бобры',
    seasons: [26, 25, 44, 14],
    episodes: [
      {
        season: '1',
        episode: '1',
        url: 'd1c62e58ff683653dcceca26f0ba6b9a',
      },
      {
        season: '1',
        episode: '2',
        url: '36084446d9f1b3354926c5358e8903d9',
      },
      {
        season: '1',
        episode: '3',
        url: '5c84fb7bed62c12cd53a60dc392c7b6d',
      },
      {
        season: '1',
        episode: '4',
        url: '99b33e3b42a4527e32c4812bfab272ea',
      },
      {
        season: '1',
        episode: '5',
        url: 'b4352720c9449b747532d5c26630b54f',
      },
      {
        season: '1',
        episode: '6',
        url: 'cbacd23bc43cf2c59565966ec1b7e74b',
      },
      {
        season: '1',
        episode: '7',
        url: 'd323465eb3bd71a3b3edc66aff69129d',
      },
      {
        season: '1',
        episode: '8',
        url: '9453a13bfbaa0318325421cb58aa8b5e',
      },
      {
        season: '1',
        episode: '9',
        url: 'd7d6a6956ea2c520e967aef4cd8296e6',
      },
      {
        season: '1',
        episode: '10',
        url: 'd4c3aca24807ca04dff64163e32ccc0f',
      },
      {
        season: '1',
        episode: '11',
        url: 'fe2fc5e717d11ce96a3ff24dd595964e',
      },
      {
        season: '1',
        episode: '12',
        url: '7ef6b3ae0fc3481ed3e511f6682b49f8',
      },
      {
        season: '1',
        episode: '13',
        url: '5150205e8297d01c6ed0dc8fd7634e96',
      },
      {
        season: '1',
        episode: '14',
        url: 'f0769b5503d198c9596c6c2aad2ffbab',
      },
      {
        season: '1',
        episode: '15',
        url: '639ff5c3a9355817d13527b62fb71def',
      },
      {
        season: '1',
        episode: '16',
        url: '01e1f5b7e6955feaa2316ee9272ffb6f',
      },
      {
        season: '1',
        episode: '17',
        url: '7dcd7e95481fd706dc3d4b01a99bff74',
      },
      {
        season: '1',
        episode: '18',
        url: 'bf1277493c9058ab6afe88cab89f9684',
      },
      {
        season: '1',
        episode: '19',
        url: '5fd2028f2401dfc6d824f56571ffa60d',
      },
      {
        season: '1',
        episode: '20',
        url: 'e455a78737d60381ef1a76b271c30b00',
      },
      {
        season: '1',
        episode: '21',
        url: '077ed80da33eea74be9418bdc73aa235',
      },
      {
        season: '1',
        episode: '22',
        url: 'b6fa9510acca0a805263a9e120efa242',
      },
      {
        season: '1',
        episode: '23',
        url: 'd7566743ce189df5dd3ae765233b3a4c',
      },
      {
        season: '1',
        episode: '24',
        url: '5f13a71dc30555c58b304fe69938f084',
      },
      {
        season: '1',
        episode: '25',
        url: '4c4653db6e9edcc4096a8d5030691df3',
      },
      {
        season: '1',
        episode: '26',
        url: '06880d5a83a48bd42a6010f5d341ad4e',
      },
      {
        season: '2',
        episode: '1',
        url: '2c8f22e3b1c18e8c3de491a38ad32973',
      },
      {
        season: '2',
        episode: '2',
        url: 'f9868cb5b58739758794c546872bc25c',
      },
      {
        season: '2',
        episode: '3',
        url: '9d3386627440657c29be237de0e5d367',
      },
      {
        season: '2',
        episode: '4',
        url: '7b357f3e369c50b20154727983fe4947',
      },
      {
        season: '2',
        episode: '5',
        url: '2716d778a103fea2f441ee8bbe2a4f31',
      },
      {
        season: '2',
        episode: '6',
        url: '72b4b3edfc44b7007a4d7325f1d8d4af',
      },
      {
        season: '2',
        episode: '7',
        url: '16a655a2c5e6f80768db43ed62e373c9',
      },
      {
        season: '2',
        episode: '8',
        url: '737d66ad7a297431fbaa5a5d9f5ca28b',
      },
      {
        season: '2',
        episode: '9',
        url: '08e03e50ccb0f16dddc16b31071ee027',
      },
      {
        season: '2',
        episode: '10',
        url: '72155320a04a7586713b9017b2000c99',
      },
      {
        season: '2',
        episode: '11',
        url: 'bdce9eb86c45bfaa225a9a614043ad8f',
      },
      {
        season: '2',
        episode: '12',
        url: '198eb1475632a452aecdc49fb4326ecb',
      },
      {
        season: '2',
        episode: '13',
        url: '5f6a08545c26a1b8b630d4afcea84224',
      },
      {
        season: '2',
        episode: '14',
        url: 'd950015ec2b893d1ccad5f53ad183fc3',
      },
      {
        season: '2',
        episode: '15',
        url: 'd89763c011b967313b2a62732823f5e4',
      },
      {
        season: '2',
        episode: '16',
        url: '5775558dad5f2d4f65fc2da661d03d42',
      },
      {
        season: '2',
        episode: '17',
        url: '5f43764dd1585c51faa5c99240ecab24',
      },
      {
        season: '2',
        episode: '18',
        url: '679db225d1524cebc5623d07208408b1',
      },
      {
        season: '2',
        episode: '19',
        url: 'cf76f4adba4efdc4616bed28b9f9b5fb',
      },
      {
        season: '2',
        episode: '20',
        url: '4698c5d0113350880f9906055d34a729',
      },
      {
        season: '2',
        episode: '21',
        url: 'd1f0964fb29a78cba4536bd8cecd72d6',
      },
      {
        season: '2',
        episode: '22',
        url: 'd985924797215f36ad1fc4c0489d9b19',
      },
      {
        season: '2',
        episode: '23',
        url: 'f5af775eecef7664eb9b1141f56403bc',
      },
      {
        season: '2',
        episode: '24',
        url: '03be6fe60e1a8c35c23297d1e0c9edee',
      },
      {
        season: '2',
        episode: '25',
        url: 'c77834678e639a6cf5fdcc145865fa93',
      },
      {
        season: '3',
        episode: '1',
        url: '2a6691da8f58fa39b5423bba55910923',
      },
      {
        season: '3',
        episode: '2',
        url: 'f47818f2fc315f4ff82ca768b61b56a8',
      },
      {
        season: '3',
        episode: '3',
        url: 'f9b471b15e90e101f261f3b06087fedb',
      },
      {
        season: '3',
        episode: '4',
        url: '2922d99288f72b8c8c1e954cab12eb80',
      },
      {
        season: '3',
        episode: '5',
        url: '6e22ec5f2a45509fbe6aa46cc552be42',
      },
      {
        season: '3',
        episode: '6',
        url: '2e04dcbd478d3084dbd2d88ca60b36de',
      },
      {
        season: '3',
        episode: '7',
        url: 'd4854e093b81e5d3a4121ed25d594cfc',
      },
      {
        season: '3',
        episode: '8',
        url: 'fb95c1be96082b4f3f23592b682b539f',
      },
      {
        season: '3',
        episode: '9',
        url: '323b45a16fdc12dc486c54991f95e221',
      },
      {
        season: '3',
        episode: '10',
        url: 'f7d2c692808224df2fde87530f9c34e7',
      },
      {
        season: '3',
        episode: '11',
        url: '11837a1d56f08ed8413a9d349fd57cec',
      },
      {
        season: '3',
        episode: '12',
        url: 'ff8607a64dd172ca18d1d96d2b9d038e',
      },
      {
        season: '3',
        episode: '13',
        url: '4daee06de321e68fb0472c1bae6baa1f',
      },
      {
        season: '3',
        episode: '14',
        url: '16375d553c529bf419ce30e1de59197d',
      },
      {
        season: '3',
        episode: '15',
        url: '9fac970296a50e5c4700bb8a1cc923d2',
      },
      {
        season: '3',
        episode: '16',
        url: 'b76d31ca9b708ca38984e1fdbacad7d1',
      },
      {
        season: '3',
        episode: '17',
        url: '118ed90c92ec0bb2cb57160362b022f9',
      },
      {
        season: '3',
        episode: '18',
        url: '4571a51b860900bac6386d14eba56f62',
      },
      {
        season: '3',
        episode: '19',
        url: '4ebdfa3f008b43e6016162ae83318f74',
      },
      {
        season: '3',
        episode: '20',
        url: '7b6571a0eebbb552a774cf8f9cbe4079',
      },
      {
        season: '3',
        episode: '21',
        url: 'dcdb04efc51e27ce1dfb3566401f3aa9',
      },
      {
        season: '3',
        episode: '22',
        url: 'a7a9654ae46a9014473397fc81ea29d6',
      },
      {
        season: '3',
        episode: '23',
        url: 'fa910e09b4e8393c2f9d627c89374090',
      },
      {
        season: '3',
        episode: '24',
        url: 'de5b9f28f93265801eee7b13b4356f4b',
      },
      {
        season: '3',
        episode: '25',
        url: '385289f85efa166ab5899b09f1bde41d',
      },
      {
        season: '3',
        episode: '26',
        url: '9c2fde519018b051104cf8a6c15ba1a3',
      },
      {
        season: '3',
        episode: '27',
        url: 'b46c323575b84bdb1f76229fc03438a4',
      },
      {
        season: '3',
        episode: '28',
        url: '14ecf9be548a4a5ea1c081e49515001a',
      },
      {
        season: '3',
        episode: '29',
        url: '1da2c65ba86949538eb35233a362d97e',
      },
      {
        season: '3',
        episode: '30',
        url: '9ea9646b7b1addde5b2cedf5d81acb1f',
      },
      {
        season: '3',
        episode: '31',
        url: 'a3cb30b1d8c6cad567f8d7e554ac226a',
      },
      {
        season: '3',
        episode: '32',
        url: 'edfd2352d0401a6a395219073f4c3125',
      },
      {
        season: '3',
        episode: '33',
        url: 'e7c611d0d91af2d5ef4b0f7c5dd2510a',
      },
      {
        season: '3',
        episode: '34',
        url: '35c6188865efbe94d9d2ffb4149ebf0e',
      },
      {
        season: '3',
        episode: '35',
        url: '2ede3c47265d031bbb916635a81f9ece',
      },
      {
        season: '3',
        episode: '36',
        url: '99e901b4cfa9e79dd97dbcc9214c78a0',
      },
      {
        season: '3',
        episode: '37',
        url: '6d241a9da8adcb07f555e47649f0b663',
      },
      {
        season: '3',
        episode: '38',
        url: '6dab8bcd1ec73e42c77292128f7bfc15',
      },
      {
        season: '3',
        episode: '39',
        url: 'cc8695ea1bf3c8ec45d5527558bf5bcd',
      },
      {
        season: '3',
        episode: '40',
        url: '480c3b0f6cbf6374fc8b067e765b7128',
      },
      {
        season: '3',
        episode: '41',
        url: '06d150d23eddeaad98370a1e95978922',
      },
      {
        season: '3',
        episode: '42',
        url: '0e714e98514a773a5af606c81d5f0433',
      },
      {
        season: '3',
        episode: '43',
        url: '1c314f58318448e4acf4ca3fad36b84e',
      },
      {
        season: '3',
        episode: '44',
        url: 'e1a4da61c6f13b34d1306790e792f39b',
      },
      {
        season: '4',
        episode: '1',
        url: 'f006d95a10a1e0bc373b9af45392491f',
      },
      {
        season: '4',
        episode: '2',
        url: 'd141855ce4b13a0395d9d561a38039f7',
      },
      {
        season: '4',
        episode: '3',
        url: '6a99cc3d253dcc95430b39ba26ced148',
      },
      {
        season: '4',
        episode: '4',
        url: '8c15a36524ca7d51576a9ca06f40f0c8',
      },
      {
        season: '4',
        episode: '5',
        url: 'd37642a950c32688d6ba60758efae584',
      },
      {
        season: '4',
        episode: '6',
        url: '3d6572c05f7be190df5c46acce6001d1',
      },
      {
        season: '4',
        episode: '7',
        url: '73a1630d091048121d8159e9c5ab8cb6',
      },
      {
        season: '4',
        episode: '8',
        url: '077d4c02d3a9223ab6c5074c4bad911c',
      },
      {
        season: '4',
        episode: '9',
        url: 'ee9db164c8459103416ba4495b38023b',
      },
      {
        season: '4',
        episode: '10',
        url: '452af802990621aaf9ee9da49ce44674',
      },
      {
        season: '4',
        episode: '11',
        url: 'b8daebaedc17c69567ca0a2ce2babf54',
      },
      {
        season: '4',
        episode: '12',
        url: '426d47ae90fc85880b98cd6ee3e9068b',
      },
      {
        season: '4',
        episode: '13',
        url: '48ea493664900f7535b9f8df3375a282',
      },
      {
        season: '4',
        episode: '14',
        url: 'ab71e36dbff1324880ba7b3df52f1ad2',
      },
    ],
  };

  const tuten = {
    cover: './assets/tutenstein.jpg',
    name: 'Тутенштейн',
    seasons: [1],
    episodes: [{
      season: '1',
      episode: '1',
      url: 'fc4144b75c6ce5f83800c096277265f3',
    }],
  };

  const kim = {
    cover: './assets/kim.jpg',
    name: 'Ким Пять-с-плюсом',
    seasons: [1],
    episodes: [{
      season: '1',
      episode: '1',
      url: 'c7fd158d9af2828a27dbf473a84964d3',
    }],
  };



  const cartoons = [chan, witch, beavers, tuten, kim];
  cartoons.forEach(cartoon => {
    if (cartoon.episodes.length > longestCartoonLength) {
      longestCartoonLength = cartoon.episodes.length;
    }
  });
  for (let i = 0; i < longestCartoonLength; i++) {
    cartoons.forEach(cartoon => {
      if (cartoon.episodes[i]) { playlist.push(cartoon.episodes[i]) }
    });
  }
  let currentEpisode = playlist[0];
  const storedIndex = JSON.parse(localStorage.getItem('currentVideoIndex'));
  let currentVideoIndex = storedIndex ? +storedIndex : 0;

  const fillSelect = (cartoon) => {
    cartoon.seasons.forEach((season, index) => {
      const seasonOption = document.createElement('option');
      seasonOption.value = index + 1 + '';
      seasonOption.text = index + 1 + '';
      selectSeason.append(seasonOption);
      selectSeason.addEventListener('change', () => {
        selectEpisode.textContent = '';
        for (let i = 1; i <= cartoon.seasons[+selectSeason.value - 1]; i++) {
          const episodeOption = document.createElement('option');
          episodeOption.value = i + '';
          episodeOption.text = i + '';
          selectEpisode.append(episodeOption);
        }
      });
      if (index === 0) {
        for (let i = 1; i <= season; i++) {
          const episodeOption = document.createElement('option');
          episodeOption.value = i + '';
          episodeOption.text = i + '';
          selectEpisode.append(episodeOption);
        }
      }
    });
  }

  cartoons.forEach(cartoon => {
    cartoon.episodes.forEach(episode => {
      episode.cartoonName = cartoon.name;
      episode.cartoonCover = cartoon.cover;
    })
  });

  fillSelect(cartoons[0]);

  selectCartoon.addEventListener('change', () => {
    selectSeason.innerHTML = ''
    selectEpisode.innerHTML = '';
    const cartoon = cartoons.find(cartoon => cartoon.name === selectCartoon.value);
    fillSelect(cartoon);
  });

  cartoons.forEach(cartoon => {
    const nameOption = document.createElement('option');
    nameOption.value = cartoon.name;
    nameOption.text = cartoon.name;
    selectCartoon.append(nameOption);
  });

  playlist.forEach((episode, index) => {
    const listItem = document.createElement('li');
    listItem.className = 'cartoon list__item';
    if (index === currentVideoIndex) { listItem.classList.add('list__item_active') }
    const cover = document.createElement('img');
    cover.className = 'cartoon__cover';
    cover.alt = `обложка мультика ${episode.cartoonName}`;
    cover.src = episode.cartoonCover;
    listItem.append(cover);
    const nameElem = document.createElement('p');
    nameElem.className = 'cartoon__name';
    nameElem.textContent = episode.cartoonName;
    listItem.title = episode.cartoonName;
    listItem.append(nameElem);
    const episodeElem = document.createElement('p');
    episodeElem.className = 'cartoon__episode-number';
    episodeElem.textContent = `Сезон ${episode.season}, серия ${episode.episode}`;
    listItem.append(episodeElem);
    playlistEl.append(listItem);
    listItem.addEventListener('play', () => {
      if (currentEpisode === episode) {
        document.querySelector('.list__item_active').classList.remove('list__item_active');
        listItem.classList.add('list__item_active');
      }
    });
    listItem.addEventListener('click', () => {
      if (currentVideoIndex !== index) {
        currentVideoIndex = index;
        play();
      }
    });
  });

  const playerContainer = document.createElement('div');
  playerContainer.className = 'player-container';
  const player = document.createElement('iframe');
  player.className = 'player';
  player.setAttribute('id', 'my-player');
  player.setAttribute('frameborder', '0');
  player.setAttribute('webkitAllowFullScreen', '');
  player.setAttribute('mozallowfullscreen', '');
  player.setAttribute('allowfullscreen', '');
  player.setAttribute('allow', 'clipboard-write; autoplay');
  player.src = `https://rutube.ru/play/embed/${playlist[currentVideoIndex].url}`;
  playerContainer.append(player);
  document.body.prepend(playerContainer);

  function doCommand(CommandJSON) {
    player.contentWindow.postMessage(JSON.stringify(CommandJSON), '*');
  }

  const play = () => {
    localStorage.setItem('currentVideoIndex', '' + currentVideoIndex);
    currentEpisode = playlist[currentVideoIndex];
    document.querySelectorAll('.list__item').forEach(elem => {
      elem.dispatchEvent(playEvt);
    });
    player.src = `https://rutube.ru/play/embed/${playlist[currentVideoIndex].url}`;
    do_play();
  }

  const playNext = () => {
    if (currentVideoIndex !== playlist.length - 1) {
      currentVideoIndex++;
    } else {
      currentVideoIndex = 0;
    }
    play();
  }

  const playPrev = () => {
    if (currentVideoIndex !== 0) {
      currentVideoIndex--;
    } else {
      currentVideoIndex = playlist.length - 1;
    }
    play();
  }

  const playFirst = () => {
    currentVideoIndex = 0;
    play();
  }

  const playLast = () => {
    currentVideoIndex = playlist.length - 1;
    play();
  }

  const playIndex = (index) => {
    currentVideoIndex = index;
    play();
  }

  function do_play() { doCommand({ type: 'player:play', data: { isFullscreen: true } }); }
  function do_pause() { doCommand({ type: 'player:pause', data: {} }); }
  function do_stop() { doCommand({ type: 'player:stop', data: {} }); }
  function do_setCurrentTime() { doCommand({ type: 'player:setCurrentTime', data: { time: 60 } }); }
  function do_relativelySeekRight() { doCommand({ type: 'player:relativelySeek', data: { time: 60 } }); }
  function do_relativelySeekLeft() { doCommand({ type: 'player:relativelySeek', data: { time: -60 } }); }
  function do_changeVideo() { doCommand({ type: 'player:changeVideo', data: { id: '33ad68e44dde6b3453ae4beaeaaf4c29' } }); }
  function do_setSkinColor() { doCommand({ type: 'player:setSkinColor', data: { color: 'FF00FF' } }); }
  function do_mute() { doCommand({ type: 'player:mute', data: {} }); }
  function do_unMute() { doCommand({ type: 'player:unMute', data: {} }); }
  function do_VolumeMid() { doCommand({ type: 'player:setVolume', data: { volume: 0.5 } }); }
  function do_VolumeUp() { doCommand({ type: 'player:setVolume', data: { change: 0.1 } }); }
  function do_VolumeDown() { doCommand({ type: 'player:setVolume', data: { change: -0.1 } }); }

  window.addEventListener("message", (event) => {
    if (event.data) {
      try {
        const data = JSON.parse(event.data);
        ev_type = data.type;
        ev_data = data.data;
      }
      catch (err) {
        ev_type = 'JSON invalid';
      };
      if (ev_type == 'player:ready') {
        do_play()
      }

      if (ev_type == 'player:changeState' && ev_data.state == 'stopped') {
        playNext();
      }
    }
  });

  toBegButton.addEventListener('click', playFirst);
  prevButton.addEventListener('click', playPrev);
  playButton.addEventListener('click', () => {
    const resIndex = playlist.findIndex((episode, index, array) => {
      return episode.cartoonName === selectCartoon.value && episode.season === selectSeason.value && episode.episode === selectEpisode.value;
    });
    if (resIndex === -1) {
      currentVideoIndex = 0;
      play();
    } else {
      currentVideoIndex = resIndex;
      play();
    }
  });
  nextButton.addEventListener('click', playNext);
  toEndButton.addEventListener('click', playLast);
</script>

</html>